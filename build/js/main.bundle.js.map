{"version":3,"sources":["node_modules/browser-pack/_prelude.js","assets/js/Services/bluetooth.service.js","assets/js/Services/foreground.service.js","assets/js/Services/notification.service.js","assets/js/Services/screencapture.service.js","assets/js/Services/share.service.js","assets/js/bundles/main.js"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/**\r\n * @fileoverview Implementation of the Bluetooth Web Api\r\n * @see {@link https://googlechrome.github.io/samples/web-bluetooth/device-info.html}\r\n *\r\n * At the time of writing this API is very unstable and useless.\r\n * Devices show up as unsupported missing their names, and it does not work on mobile.\r\n */\r\n\r\nexport default class BluetoothService {\r\n  constructor() {\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  getAllDevices() {\r\n    if (!('bluetooth' in navigator)) {\r\n      alert('no bluetooth :(')\r\n      return\r\n    }\r\n\r\n    navigator.bluetooth.requestDevice({\r\n      //filters: [],\r\n      acceptAllDevices: true\r\n    })\r\n      .then(devices => {\r\n        console.log(devices);\r\n      })\r\n      .catch(error => console.error(`${error.name} (${error.code}): ${error.message}`))\r\n  }\r\n}\r\n","export default class ForegroundService {\r\n  constructor() {\r\n    document.addEventListener('visibilitychange', event => {\r\n      console.log(event, document.visibilityState);\r\n    });\r\n  }\r\n\r\n  static get isInForeground() {\r\n    return document.visibilityState === \"visible\"\r\n  }\r\n}\r\n","export default class NotificationService {\r\n  /**\r\n   * Show a local notification\r\n   * @param {string} title\r\n   * @param {NotificationOptions} options\r\n   */\r\n  static showNotification(title, options) {\r\n    if (Notification.permission !== 'granted') {\r\n      Notification.requestPermission().then(value => {\r\n        sendNotification(title, options);\r\n      });\r\n    } else {\r\n      sendNotification(title, options);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} title\r\n * @param {NotificationOptions} options\r\n */\r\nfunction sendNotification(title, options) {\r\n  const opts = Object.assign({\r\n    icon: './assets/img/icon-192.png',\r\n    badge: './assets/img/icon-128.png',\r\n    body: \"\",\r\n    vibrate: [200, 100, 200, 100, 200, 100, 200],\r\n    tag: 'test-notification'\r\n  }, options);\r\n\r\n  navigator.serviceWorker.getRegistration().then(function (reg) {\r\n    reg.showNotification(title, opts);\r\n  });\r\n}\r\n","export default class ScreencaptureService {\r\n  /**\r\n   *\r\n   * @param {HTMLVideoElement} videoEl\r\n   */\r\n  constructor(videoEl, options) {\r\n    this.videoEl = videoEl;\r\n    this.options = Object.assign({\r\n      video: {\r\n        cursor: \"always\",\r\n        displaySurface: \"monitor\"\r\n      },\r\n      audio: false\r\n    }, options);\r\n\r\n    navigator.mediaDevices.getDisplayMedia(this.options)\r\n      .then(stream => {\r\n        this.videoEl.srcObject = stream;\r\n        this.videoEl.style.display = \"block\";\r\n\r\n        stream.oninactive = this.handleCaptureStop.bind(this);\r\n      })\r\n      .catch(error => console.log(\"\" + error))\r\n  }\r\n\r\n  handleCaptureStop(event) {\r\n    const tracks = this.videoEl.srcObject.getTracks();\r\n\r\n    tracks.forEach(track => track.stop());\r\n    this.videoEl.srcObject = null;\r\n    this.videoEl.style.display = \"none\";\r\n  }\r\n}\r\n","export default class ShareService {\r\n    static get hasShare() {\r\n        return (navigator.share) ? true : false;\r\n    }\r\n\r\n    /**\r\n     * Share\r\n     * @param {ShareModel} shareObj\r\n     */\r\n    static share(shareObj) {\r\n        if (this.hasShare) {\r\n            return navigator.share({\r\n                title: shareObj.title,\r\n                text: shareObj.text,\r\n                url: shareObj.url\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport class ShareModel {\r\n    constructor(title, text, url) {\r\n        this.title = title;\r\n        this.text = text;\r\n        this.url = url;\r\n    }\r\n}\r\n","import NotificationService from \"./../Services/notification.service\"\r\nimport ShareService, { ShareModel } from \"./../Services/share.service\"\r\nimport BluetoothService from \"../Services/bluetooth.service\";\r\nimport ForegroundService from \"../Services/foreground.service\";\r\nimport ScreencaptureService from \"../Services/screencapture.service\";\r\n\r\nconst SERVICEWORKER = './service-worker.js';\r\n\r\nclass Main {\r\n  constructor() {\r\n    window.addEventListener('beforeinstallprompt', this.handleInstall.bind(this));\r\n\r\n    if ('serviceworker' in navigator) {\r\n      window.addEventListener('load', this.registerServiceWorker.bind(this));\r\n    }\r\n\r\n    this.state = {\r\n      installPrompt: null,\r\n    };\r\n\r\n    document.querySelector(\"#btnShare\").addEventListener('click', this.handleShareClick.bind(this));\r\n    document.querySelector(\"#btnNotify\").addEventListener('click', this.handleNotifyClick.bind(this));\r\n    document.querySelector(\"#btnBluetooth\").addEventListener('click', this.handleBluetoothClick.bind(this));\r\n    document.querySelector(\"#btnScreencapture\").addEventListener('click', this.handleScreencaptureClick.bind(this));\r\n\r\n    const fg = new ForegroundService();\r\n  }\r\n\r\n  handleInstall(e) {\r\n    console.log('beforeinstallprompt Event fired');\r\n\r\n    e.userChoice.then(function (choiceResult) {\r\n      console.log(choiceResult.outcome);\r\n\r\n      if (choiceResult.outcome === 'dismissed') {\r\n        console.log('User cancelled home screen install');\r\n        alert('ahw :(');\r\n      } else {\r\n        console.log('User added to home screen');\r\n        alert('Yay!');\r\n      }\r\n    });\r\n  }\r\n\r\n  registerServiceWorker() {\r\n    navigator.serviceWorker.register(SERVICEWORKER).then(function (registration) {\r\n      console.log(`ServiceWorker registration successful with scope: ${registration.scope}`);\r\n    }, function (err) {\r\n      console.error(`ServiceWorker registration failed: ${err}`);\r\n    });\r\n  }\r\n\r\n  promptInstall(installPrompt) {\r\n    if (installPrompt === undefined) return false;\r\n\r\n    installPrompt.prompt();\r\n\r\n    installPrompt.userChoice.then(function (choiceResult) {\r\n      console.log(choiceResult.outcome);\r\n\r\n      installPrompt = null;\r\n\r\n      return choiceResult.outcome !== 'dismissed';\r\n    });\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Share button click event\r\n   * @param {Event} event\r\n   */\r\n  handleShareClick(event) {\r\n    ShareService.share(new ShareModel('KappaPride!', 'PWA is Kappa', './'))\r\n  }\r\n\r\n  /**\r\n   * Notify button click event\r\n   * @param {Event} event\r\n   */\r\n  handleNotifyClick(event) {\r\n    NotificationService.showNotification(\"Kappa world!\", {body: \"This notification is a test, so do with it as you will.\"});\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  handleBluetoothClick(event) {\r\n    const service = new BluetoothService();\r\n    // div#listBluetoothDevices\r\n    service.getAllDevices();\r\n  }\r\n\r\n  handleScreencaptureClick(event) {\r\n    new ScreencaptureService(document.querySelector(\"#vidScreencapture\"));\r\n  }\r\n}\r\n\r\nconst m = new Main();\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvU2VydmljZXMvYmx1ZXRvb3RoLnNlcnZpY2UuanMiLCJhc3NldHMvanMvU2VydmljZXMvZm9yZWdyb3VuZC5zZXJ2aWNlLmpzIiwiYXNzZXRzL2pzL1NlcnZpY2VzL25vdGlmaWNhdGlvbi5zZXJ2aWNlLmpzIiwiYXNzZXRzL2pzL1NlcnZpY2VzL3NjcmVlbmNhcHR1cmUuc2VydmljZS5qcyIsImFzc2V0cy9qcy9TZXJ2aWNlcy9zaGFyZS5zZXJ2aWNlLmpzIiwiYXNzZXRzL2pzL2J1bmRsZXMvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7OztJQVFxQixnQjs7O0FBQ25CLDhCQUFjO0FBQUE7QUFFYjtBQUVEOzs7Ozs7O29DQUdnQjtBQUNkLFVBQUksRUFBRSxlQUFlLFNBQWpCLENBQUosRUFBaUM7QUFDL0IsUUFBQSxLQUFLLENBQUMsaUJBQUQsQ0FBTDtBQUNBO0FBQ0Q7O0FBRUQsTUFBQSxTQUFTLENBQUMsU0FBVixDQUFvQixhQUFwQixDQUFrQztBQUNoQztBQUNBLFFBQUEsZ0JBQWdCLEVBQUU7QUFGYyxPQUFsQyxFQUlHLElBSkgsQ0FJUSxVQUFBLE9BQU8sRUFBSTtBQUNmLFFBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxPQUFaO0FBQ0QsT0FOSCxFQU9HLEtBUEgsQ0FPUyxVQUFBLEtBQUs7QUFBQSxlQUFJLE9BQU8sQ0FBQyxLQUFSLFdBQWlCLEtBQUssQ0FBQyxJQUF2QixlQUFnQyxLQUFLLENBQUMsSUFBdEMsZ0JBQWdELEtBQUssQ0FBQyxPQUF0RCxFQUFKO0FBQUEsT0FQZDtBQVFEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lDOUJrQixpQjs7O0FBQ25CLCtCQUFjO0FBQUE7O0FBQ1osSUFBQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFVBQUEsS0FBSyxFQUFJO0FBQ3JE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QVUsR0FBVixFQUFlO0FBQ2hCLFFBQUEsT0FBTyxDQUFDLEtBQVIsOENBQW9ELEdBQXBEO0FBQ0QsT0FKRDtBQUtEOzs7a0NBRWEsYSxFQUFlO0FBQzNCLFVBQUksYUFBYSxLQUFLLFNBQXRCLEVBQWlDLE9BQU8sS0FBUDtBQUVqQyxNQUFBLGFBQWEsQ0FBQyxNQUFkO0FBRUEsTUFBQSxhQUFhLENBQUMsVUFBZCxDQUF5QixJQUF6QixDQUE4QixVQUFVLFlBQVYsRUFBd0I7QUFDcEQsUUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLFlBQVksQ0FBQyxPQUF6QjtBQUVBLFFBQUEsYUFBYSxHQUFHLElBQWhCO0FBRUEsZUFBTyxZQUFZLENBQUMsT0FBYixLQUF5QixXQUFoQztBQUNELE9BTkQ7QUFPQSxhQUFPLEtBQVA7QUFDRDtBQUVEOzs7Ozs7O3FDQUlpQixLLEVBQU87QUFDdEIscUJBQWEsS0FBYixDQUFtQixJQUFJLGlCQUFKLENBQWUsYUFBZixFQUE4QixjQUE5QixFQUE4QyxJQUE5QyxDQUFuQjtBQUNEO0FBRUQ7Ozs7Ozs7c0NBSWtCLEssRUFBTztBQUN2Qiw0QkFBb0IsZ0JBQXBCLENBQXFDLGNBQXJDLEVBQXFEO0FBQUMsUUFBQSxJQUFJLEVBQUU7QUFBUCxPQUFyRDtBQUNEO0FBRUQ7Ozs7Ozs7eUNBSXFCLEssRUFBTztBQUMxQixVQUFNLE9BQU8sR0FBRyxJQUFJLGtCQUFKLEVBQWhCLENBRDBCLENBRTFCOztBQUNBLE1BQUEsT0FBTyxDQUFDLGFBQVI7QUFDRDs7OzZDQUV3QixLLEVBQU87QUFDOUIsVUFBSSxzQkFBSixDQUF5QixRQUFRLENBQUMsYUFBVCxDQUF1QixtQkFBdkIsQ0FBekI7QUFDRDs7Ozs7O0FBR0gsSUFBTSxDQUFDLEdBQUcsSUFBSSxJQUFKLEVBQVYiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipcclxuICogQGZpbGVvdmVydmlldyBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgQmx1ZXRvb3RoIFdlYiBBcGlcclxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9nb29nbGVjaHJvbWUuZ2l0aHViLmlvL3NhbXBsZXMvd2ViLWJsdWV0b290aC9kZXZpY2UtaW5mby5odG1sfVxyXG4gKlxyXG4gKiBBdCB0aGUgdGltZSBvZiB3cml0aW5nIHRoaXMgQVBJIGlzIHZlcnkgdW5zdGFibGUgYW5kIHVzZWxlc3MuXHJcbiAqIERldmljZXMgc2hvdyB1cCBhcyB1bnN1cHBvcnRlZCBtaXNzaW5nIHRoZWlyIG5hbWVzLCBhbmQgaXQgZG9lcyBub3Qgd29yayBvbiBtb2JpbGUuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmx1ZXRvb3RoU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcblxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKi9cclxuICBnZXRBbGxEZXZpY2VzKCkge1xyXG4gICAgaWYgKCEoJ2JsdWV0b290aCcgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICBhbGVydCgnbm8gYmx1ZXRvb3RoIDooJylcclxuICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgbmF2aWdhdG9yLmJsdWV0b290aC5yZXF1ZXN0RGV2aWNlKHtcclxuICAgICAgLy9maWx0ZXJzOiBbXSxcclxuICAgICAgYWNjZXB0QWxsRGV2aWNlczogdHJ1ZVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4oZGV2aWNlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGV2aWNlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmVycm9yKGAke2Vycm9yLm5hbWV9ICgke2Vycm9yLmNvZGV9KTogJHtlcnJvci5tZXNzYWdlfWApKVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JlZ3JvdW5kU2VydmljZSB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgZXZlbnQgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhldmVudCwgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc3RhdGljIGdldCBpc0luRm9yZWdyb3VuZCgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09IFwidmlzaWJsZVwiXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vdGlmaWNhdGlvblNlcnZpY2Uge1xyXG4gIC8qKlxyXG4gICAqIFNob3cgYSBsb2NhbCBub3RpZmljYXRpb25cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVcclxuICAgKiBAcGFyYW0ge05vdGlmaWNhdGlvbk9wdGlvbnN9IG9wdGlvbnNcclxuICAgKi9cclxuICBzdGF0aWMgc2hvd05vdGlmaWNhdGlvbih0aXRsZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkudGhlbih2YWx1ZSA9PiB7XHJcbiAgICAgICAgc2VuZE5vdGlmaWNhdGlvbih0aXRsZSwgb3B0aW9ucyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VuZE5vdGlmaWNhdGlvbih0aXRsZSwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICpcclxuICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlXHJcbiAqIEBwYXJhbSB7Tm90aWZpY2F0aW9uT3B0aW9uc30gb3B0aW9uc1xyXG4gKi9cclxuZnVuY3Rpb24gc2VuZE5vdGlmaWNhdGlvbih0aXRsZSwgb3B0aW9ucykge1xyXG4gIGNvbnN0IG9wdHMgPSBPYmplY3QuYXNzaWduKHtcclxuICAgIGljb246ICcuL2Fzc2V0cy9pbWcvaWNvbi0xOTIucG5nJyxcclxuICAgIGJhZGdlOiAnLi9hc3NldHMvaW1nL2ljb24tMTI4LnBuZycsXHJcbiAgICBib2R5OiBcIlwiLFxyXG4gICAgdmlicmF0ZTogWzIwMCwgMTAwLCAyMDAsIDEwMCwgMjAwLCAxMDAsIDIwMF0sXHJcbiAgICB0YWc6ICd0ZXN0LW5vdGlmaWNhdGlvbidcclxuICB9LCBvcHRpb25zKTtcclxuXHJcbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIuZ2V0UmVnaXN0cmF0aW9uKCkudGhlbihmdW5jdGlvbiAocmVnKSB7XHJcbiAgICByZWcuc2hvd05vdGlmaWNhdGlvbih0aXRsZSwgb3B0cyk7XHJcbiAgfSk7XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NyZWVuY2FwdHVyZVNlcnZpY2Uge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtIVE1MVmlkZW9FbGVtZW50fSB2aWRlb0VsXHJcbiAgICovXHJcbiAgY29uc3RydWN0b3IodmlkZW9FbCwgb3B0aW9ucykge1xyXG4gICAgdGhpcy52aWRlb0VsID0gdmlkZW9FbDtcclxuICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe1xyXG4gICAgICB2aWRlbzoge1xyXG4gICAgICAgIGN1cnNvcjogXCJhbHdheXNcIixcclxuICAgICAgICBkaXNwbGF5U3VyZmFjZTogXCJtb25pdG9yXCJcclxuICAgICAgfSxcclxuICAgICAgYXVkaW86IGZhbHNlXHJcbiAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh0aGlzLm9wdGlvbnMpXHJcbiAgICAgIC50aGVuKHN0cmVhbSA9PiB7XHJcbiAgICAgICAgdGhpcy52aWRlb0VsLnNyY09iamVjdCA9IHN0cmVhbTtcclxuICAgICAgICB0aGlzLnZpZGVvRWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgICAgICAgc3RyZWFtLm9uaW5hY3RpdmUgPSB0aGlzLmhhbmRsZUNhcHR1cmVTdG9wLmJpbmQodGhpcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhcIlwiICsgZXJyb3IpKVxyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2FwdHVyZVN0b3AoZXZlbnQpIHtcclxuICAgIGNvbnN0IHRyYWNrcyA9IHRoaXMudmlkZW9FbC5zcmNPYmplY3QuZ2V0VHJhY2tzKCk7XHJcblxyXG4gICAgdHJhY2tzLmZvckVhY2godHJhY2sgPT4gdHJhY2suc3RvcCgpKTtcclxuICAgIHRoaXMudmlkZW9FbC5zcmNPYmplY3QgPSBudWxsO1xyXG4gICAgdGhpcy52aWRlb0VsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2hhcmVTZXJ2aWNlIHtcclxuICAgIHN0YXRpYyBnZXQgaGFzU2hhcmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIChuYXZpZ2F0b3Iuc2hhcmUpID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hhcmVcclxuICAgICAqIEBwYXJhbSB7U2hhcmVNb2RlbH0gc2hhcmVPYmpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHNoYXJlKHNoYXJlT2JqKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzU2hhcmUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5zaGFyZSh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogc2hhcmVPYmoudGl0bGUsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzaGFyZU9iai50ZXh0LFxyXG4gICAgICAgICAgICAgICAgdXJsOiBzaGFyZU9iai51cmxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2hhcmVNb2RlbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgdGV4dCwgdXJsKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZSA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMudGV4dCA9IHRleHQ7XHJcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IE5vdGlmaWNhdGlvblNlcnZpY2UgZnJvbSBcIi4vLi4vU2VydmljZXMvbm90aWZpY2F0aW9uLnNlcnZpY2VcIlxyXG5pbXBvcnQgU2hhcmVTZXJ2aWNlLCB7IFNoYXJlTW9kZWwgfSBmcm9tIFwiLi8uLi9TZXJ2aWNlcy9zaGFyZS5zZXJ2aWNlXCJcclxuaW1wb3J0IEJsdWV0b290aFNlcnZpY2UgZnJvbSBcIi4uL1NlcnZpY2VzL2JsdWV0b290aC5zZXJ2aWNlXCI7XHJcbmltcG9ydCBGb3JlZ3JvdW5kU2VydmljZSBmcm9tIFwiLi4vU2VydmljZXMvZm9yZWdyb3VuZC5zZXJ2aWNlXCI7XHJcbmltcG9ydCBTY3JlZW5jYXB0dXJlU2VydmljZSBmcm9tIFwiLi4vU2VydmljZXMvc2NyZWVuY2FwdHVyZS5zZXJ2aWNlXCI7XHJcblxyXG5jb25zdCBTRVJWSUNFV09SS0VSID0gJy4vc2VydmljZS13b3JrZXIuanMnO1xyXG5cclxuY2xhc3MgTWFpbiB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignYmVmb3JlaW5zdGFsbHByb21wdCcsIHRoaXMuaGFuZGxlSW5zdGFsbC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICBpZiAoJ3NlcnZpY2V3b3JrZXInIGluIG5hdmlnYXRvcikge1xyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMucmVnaXN0ZXJTZXJ2aWNlV29ya2VyLmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc3RhdGUgPSB7XHJcbiAgICAgIGluc3RhbGxQcm9tcHQ6IG51bGwsXHJcbiAgICB9O1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuU2hhcmVcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVNoYXJlQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J0bk5vdGlmeVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlTm90aWZ5Q2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J0bkJsdWV0b290aFwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQmx1ZXRvb3RoQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2J0blNjcmVlbmNhcHR1cmVcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZVNjcmVlbmNhcHR1cmVDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICBjb25zdCBmZyA9IG5ldyBGb3JlZ3JvdW5kU2VydmljZSgpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlSW5zdGFsbChlKSB7XHJcbiAgICBjb25zb2xlLmxvZygnYmVmb3JlaW5zdGFsbHByb21wdCBFdmVudCBmaXJlZCcpO1xyXG5cclxuICAgIGUudXNlckNob2ljZS50aGVuKGZ1bmN0aW9uIChjaG9pY2VSZXN1bHQpIHtcclxuICAgICAgY29uc29sZS5sb2coY2hvaWNlUmVzdWx0Lm91dGNvbWUpO1xyXG5cclxuICAgICAgaWYgKGNob2ljZVJlc3VsdC5vdXRjb21lID09PSAnZGlzbWlzc2VkJykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGNhbmNlbGxlZCBob21lIHNjcmVlbiBpbnN0YWxsJyk7XHJcbiAgICAgICAgYWxlcnQoJ2FodyA6KCcpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdVc2VyIGFkZGVkIHRvIGhvbWUgc2NyZWVuJyk7XHJcbiAgICAgICAgYWxlcnQoJ1lheSEnKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZWdpc3RlclNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcihTRVJWSUNFV09SS0VSKS50aGVuKGZ1bmN0aW9uIChyZWdpc3RyYXRpb24pIHtcclxuICAgICAgY29uc29sZS5sb2coYFNlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwgd2l0aCBzY29wZTogJHtyZWdpc3RyYXRpb24uc2NvcGV9YCk7XHJcbiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFNlcnZpY2VXb3JrZXIgcmVnaXN0cmF0aW9uIGZhaWxlZDogJHtlcnJ9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByb21wdEluc3RhbGwoaW5zdGFsbFByb21wdCkge1xyXG4gICAgaWYgKGluc3RhbGxQcm9tcHQgPT09IHVuZGVmaW5lZCkgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgIGluc3RhbGxQcm9tcHQucHJvbXB0KCk7XHJcblxyXG4gICAgaW5zdGFsbFByb21wdC51c2VyQ2hvaWNlLnRoZW4oZnVuY3Rpb24gKGNob2ljZVJlc3VsdCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhjaG9pY2VSZXN1bHQub3V0Y29tZSk7XHJcblxyXG4gICAgICBpbnN0YWxsUHJvbXB0ID0gbnVsbDtcclxuXHJcbiAgICAgIHJldHVybiBjaG9pY2VSZXN1bHQub3V0Y29tZSAhPT0gJ2Rpc21pc3NlZCc7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFNoYXJlIGJ1dHRvbiBjbGljayBldmVudFxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHJcbiAgICovXHJcbiAgaGFuZGxlU2hhcmVDbGljayhldmVudCkge1xyXG4gICAgU2hhcmVTZXJ2aWNlLnNoYXJlKG5ldyBTaGFyZU1vZGVsKCdLYXBwYVByaWRlIScsICdQV0EgaXMgS2FwcGEnLCAnLi8nKSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE5vdGlmeSBidXR0b24gY2xpY2sgZXZlbnRcclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxyXG4gICAqL1xyXG4gIGhhbmRsZU5vdGlmeUNsaWNrKGV2ZW50KSB7XHJcbiAgICBOb3RpZmljYXRpb25TZXJ2aWNlLnNob3dOb3RpZmljYXRpb24oXCJLYXBwYSB3b3JsZCFcIiwge2JvZHk6IFwiVGhpcyBub3RpZmljYXRpb24gaXMgYSB0ZXN0LCBzbyBkbyB3aXRoIGl0IGFzIHlvdSB3aWxsLlwifSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHJcbiAgICovXHJcbiAgaGFuZGxlQmx1ZXRvb3RoQ2xpY2soZXZlbnQpIHtcclxuICAgIGNvbnN0IHNlcnZpY2UgPSBuZXcgQmx1ZXRvb3RoU2VydmljZSgpO1xyXG4gICAgLy8gZGl2I2xpc3RCbHVldG9vdGhEZXZpY2VzXHJcbiAgICBzZXJ2aWNlLmdldEFsbERldmljZXMoKTtcclxuICB9XHJcblxyXG4gIGhhbmRsZVNjcmVlbmNhcHR1cmVDbGljayhldmVudCkge1xyXG4gICAgbmV3IFNjcmVlbmNhcHR1cmVTZXJ2aWNlKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdmlkU2NyZWVuY2FwdHVyZVwiKSk7XHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBtID0gbmV3IE1haW4oKTtcclxuIl19"}