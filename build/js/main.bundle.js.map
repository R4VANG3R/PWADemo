{"version":3,"sources":["node_modules/browser-pack/_prelude.js","assets/js/Services/battery.service.js","assets/js/Services/bluetooth.service.js","assets/js/Services/foreground.service.js","assets/js/Services/notification.service.js","assets/js/Services/screencapture.service.js","assets/js/Services/share.service.js","assets/js/bundles/main.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;ICAqB,c;;;AACnB,4BAAc;AAAA;AAEb;AAED;;;;;;;mCAGsB;AACpB,aAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,QAAA,SAAS,CAAC,UAAV,GAAuB,IAAvB,CAA4B,UAAA,KAAK;AAAA,iBAAI,OAAO,CAAC,KAAK,CAAC,KAAP,CAAX;AAAA,SAAjC;AACD,OAFM,CAAP;AAGD;;;;;;;;;;;;;;;;;;;;;;ACZH;;;;;;;IAQqB,gB;;;AACnB,8BAAc;AAAA;AAEb;AAED;;;;;;;oCAGgB;AACd,UAAI,EAAE,eAAe,SAAjB,CAAJ,EAAiC;AAC/B,QAAA,KAAK,CAAC,iBAAD,CAAL;AACA;AACD;;AAED,MAAA,SAAS,CAAC,SAAV,CAAoB,aAApB,CAAkC;AAChC;AACA,QAAA,gBAAgB,EAAE;AAFc,OAAlC,EAIG,IAJH,CAIQ,UAAA,OAAO,EAAI;AACf,QAAA,OAAO,CAAC,GAAR,CAAY,OAAZ;AACD,OANH,EAOG,KAPH,CAOS,UAAA,KAAK;AAAA,eAAI,OAAO,CAAC,KAAR,WAAiB,KAAK,CAAC,IAAvB,eAAgC,KAAK,CAAC,IAAtC,gBAAgD,KAAK,CAAC,OAAtD,EAAJ;AAAA,OAPd;AAQD;;;;;;;;;;;;;;;;;;;;;;IC9BkB,iB;;;AACnB,+BAAc;AAAA;;AACZ,IAAA,QAAQ,CAAC,gBAAT,CAA0B,kBAA1B,EAA8C,UAAA,KAAK,EAAI;AACrD,MAAA,OAAO,CAAC,GAAR,CAAY,KAAZ,EAAmB,QAAQ,CAAC,eAA5B;AACD,KAFD;AAGD;;;;wBAE2B;AAC1B,aAAO,QAAQ,CAAC,eAAT,KAA6B,SAApC;AACD;;;;;;;;;;;;;;;;;;;;;;ICTkB,mB;;;;;;;;;;AACnB;;;;;qCAKwB,K,EAAO,O,EAAS;AACtC,UAAM,IAAI,GAAG,MAAM,CAAC,MAAP,CAAc;AACzB,QAAA,IAAI,EAAE,2BADmB;AAEzB,QAAA,KAAK,EAAE,2BAFkB;AAGzB,QAAA,IAAI,EAAE,EAHmB;AAIzB,QAAA,OAAO,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,CAJgB;AAKzB,QAAA,GAAG,EAAE;AALoB,OAAd,EAMV,OANU,CAAb;;AAQA,UAAI,YAAY,CAAC,UAAb,KAA4B,SAAhC,EAA2C;AACzC,QAAA,YAAY,CAAC,iBAAb,GAAiC,IAAjC,CAAsC,UAAA,MAAM,EAAI;AAC9C,UAAA,SAAS,CAAC,aAAV,CAAwB,eAAxB,GAA0C,IAA1C,CAA+C,UAAA,YAAY,EAAI;AAC7D,YAAA,YAAY,CAAC,gBAAb,CAA8B,KAA9B,EAAqC,IAArC;AACD,WAFD;AAGD,SAJD;AAKD,OAND,MAMO;AACL,QAAA,SAAS,CAAC,aAAV,CAAwB,eAAxB,GAA0C,IAA1C,CAA+C,UAAA,YAAY,EAAI;AAC7D,UAAA,YAAY,CAAC,gBAAb,CAA8B,KAA9B,EAAqC,IAArC;AACD,SAFD;AAGD;AACF;;;;;;;;;;;;;;;;;;;;;;AC1BH;;;;;IAMqB,oB;;;AACnB;;;;AAIA,gCAAY,OAAZ,EAAqB,OAArB,EAA8B;AAAA;;AAAA;;AAC5B,SAAK,OAAL,GAAe,OAAf;AACA,SAAK,OAAL,GAAe,MAAM,CAAC,MAAP,CAAc;AAC3B,MAAA,KAAK,EAAE;AACL,QAAA,MAAM,EAAE,QADH;AAEL,QAAA,cAAc,EAAE;AAFX,OADoB;AAK3B,MAAA,KAAK,EAAE;AALoB,KAAd,EAMZ,OANY,CAAf;AAQA,IAAA,SAAS,CAAC,YAAV,CAAuB,eAAvB,CAAuC,KAAK,OAA5C,EACG,IADH,CACQ,UAAA,MAAM,EAAI;AACd,MAAA,KAAI,CAAC,OAAL,CAAa,SAAb,GAAyB,MAAzB;AACA,MAAA,KAAI,CAAC,OAAL,CAAa,KAAb,CAAmB,OAAnB,GAA6B,OAA7B;AAEA,MAAA,MAAM,CAAC,UAAP,GAAoB,KAAI,CAAC,iBAAL,CAAuB,IAAvB,CAA4B,KAA5B,CAApB;AACD,KANH,EAOG,KAPH,CAOS,UAAA,KAAK;AAAA,aAAI,OAAO,CAAC,GAAR,CAAY,KAAK,KAAjB,CAAJ;AAAA,KAPd;AAQD;;;;sCAEiB,K,EAAO;AACvB,UAAM,MAAM,GAAG,KAAK,OAAL,CAAa,SAAb,CAAuB,SAAvB,EAAf;AAEA,MAAA,MAAM,CAAC,OAAP,CAAe,UAAA,KAAK;AAAA,eAAI,KAAK,CAAC,IAAN,EAAJ;AAAA,OAApB;AACA,WAAK,OAAL,CAAa,SAAb,GAAyB,IAAzB;AACA,WAAK,OAAL,CAAa,KAAb,CAAmB,OAAnB,GAA6B,MAA7B;AACD;;;;;;;;;;;;;;;;;;;;;;ICrCkB,Y;;;;;;;;;;AAKjB;;;;0BAIa,Q,EAAU;AACnB,UAAI,KAAK,QAAT,EAAmB;AACf,eAAO,SAAS,CAAC,KAAV,CAAgB;AACnB,UAAA,KAAK,EAAE,QAAQ,CAAC,KADG;AAEnB,UAAA,IAAI,EAAE,QAAQ,CAAC,IAFI;AAGnB,UAAA,GAAG,EAAE,QAAQ,CAAC;AAHK,SAAhB,CAAP;AAKH;AACJ;;;wBAhBqB;AAClB,aAAQ,SAAS,CAAC,KAAX,GAAoB,IAApB,GAA2B,KAAlC;AACH;;;;;;;;IAiBQ,U,GACT,oBAAY,KAAZ,EAAmB,IAAnB,EAAyB,GAAzB,EAA8B;AAAA;;AAC1B,OAAK,KAAL,GAAa,KAAb;AACA,OAAK,IAAL,GAAY,IAAZ;AACA,OAAK,GAAL,GAAW,GAAX;AACH,C;;;;;;;ACzBL;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEA,IAAM,aAAa,GAAG,qBAAtB;;IAEM,I;;;AACJ,kBAAc;AAAA;;AACZ,IAAA,MAAM,CAAC,gBAAP,CAAwB,qBAAxB,EAA+C,KAAK,aAAL,CAAmB,IAAnB,CAAwB,IAAxB,CAA/C;;AAEA,QAAI,mBAAmB,SAAvB,EAAkC;AAChC,MAAA,MAAM,CAAC,gBAAP,CAAwB,MAAxB,EAAgC,KAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC,CAAhC;AACD;;AAED,SAAK,KAAL,GAAa;AACX,MAAA,aAAa,EAAE;AADJ,KAAb;AAIA,IAAA,QAAQ,CAAC,aAAT,CAAuB,WAAvB,EAAoC,gBAApC,CAAqD,OAArD,EAA8D,KAAK,gBAAL,CAAsB,IAAtB,CAA2B,IAA3B,CAA9D;AACA,IAAA,QAAQ,CAAC,aAAT,CAAuB,YAAvB,EAAqC,gBAArC,CAAsD,OAAtD,EAA+D,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAA/D;AACA,IAAA,QAAQ,CAAC,aAAT,CAAuB,eAAvB,EAAwC,gBAAxC,CAAyD,OAAzD,EAAkE,KAAK,oBAAL,CAA0B,IAA1B,CAA+B,IAA/B,CAAlE;AACA,IAAA,QAAQ,CAAC,aAAT,CAAuB,mBAAvB,EAA4C,gBAA5C,CAA6D,OAA7D,EAAsE,KAAK,wBAAL,CAA8B,IAA9B,CAAmC,IAAnC,CAAtE;AACA,IAAA,QAAQ,CAAC,aAAT,CAAuB,cAAvB,EAAuC,gBAAvC,CAAwD,OAAxD,EAAiE,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,IAA9B,CAAjE;AAEA,QAAM,EAAE,GAAG,IAAI,mBAAJ,EAAX;AAEA,IAAA,QAAQ,CAAC,aAAT,CAAuB,iBAAvB,EAA0C,SAA1C,oBAAgE,SAAS,CAAC,UAAV,CAAqB,QAArF,+BAAkH,SAAS,CAAC,UAAV,CAAqB,GAAvI;;AACA,qBAAe,YAAf,GAA8B,IAA9B,CAAmC,UAAA,KAAK,EAAI;AAC1C,MAAA,QAAQ,CAAC,aAAT,CAAuB,aAAvB,EAAsC,SAAtC,GAAkD,KAAK,GAAG,GAAR,GAAc,IAAhE;AACD,KAFD;AAGD;;;;kCAEa,C,EAAG;AACf,MAAA,OAAO,CAAC,GAAR,CAAY,iCAAZ;AAEA,MAAA,CAAC,CAAC,UAAF,CAAa,IAAb,CAAkB,UAAU,YAAV,EAAwB;AACxC,QAAA,OAAO,CAAC,GAAR,CAAY,YAAY,CAAC,OAAzB;;AAEA,YAAI,YAAY,CAAC,OAAb,KAAyB,WAA7B,EAA0C;AACxC,UAAA,OAAO,CAAC,GAAR,CAAY,oCAAZ;AACA,UAAA,KAAK,CAAC,QAAD,CAAL;AACD,SAHD,MAGO;AACL,UAAA,OAAO,CAAC,GAAR,CAAY,2BAAZ;AACA,UAAA,KAAK,CAAC,MAAD,CAAL;AACD;AACF,OAVD;AAWD;;;4CAEuB;AACtB,MAAA,SAAS,CAAC,aAAV,CAAwB,QAAxB,CAAiC,aAAjC,EAAgD,IAAhD,CAAqD,UAAU,YAAV,EAAwB;AAC3E,QAAA,OAAO,CAAC,GAAR,6DAAiE,YAAY,CAAC,KAA9E;AACD,OAFD,EAEG,UAAU,GAAV,EAAe;AAChB,QAAA,OAAO,CAAC,KAAR,8CAAoD,GAApD;AACD,OAJD;AAKD;;;kCAEa,a,EAAe;AAC3B,UAAI,aAAa,KAAK,SAAtB,EAAiC,OAAO,KAAP;AAEjC,MAAA,aAAa,CAAC,MAAd;AAEA,MAAA,aAAa,CAAC,UAAd,CAAyB,IAAzB,CAA8B,UAAU,YAAV,EAAwB;AACpD,QAAA,OAAO,CAAC,GAAR,CAAY,YAAY,CAAC,OAAzB;AAEA,QAAA,aAAa,GAAG,IAAhB;AAEA,eAAO,YAAY,CAAC,OAAb,KAAyB,WAAhC;AACD,OAND;AAOA,aAAO,KAAP;AACD;AAED;;;;;;;qCAIiB,K,EAAO;AACtB,qBAAa,KAAb,CAAmB,IAAI,iBAAJ,CAAe,aAAf,EAA8B,cAA9B,EAA8C,IAA9C,CAAnB;AACD;AAED;;;;;;;sCAIkB,K,EAAO;AACvB,4BAAoB,gBAApB,CAAqC,cAArC,EAAqD;AAAC,QAAA,IAAI,EAAE;AAAP,OAArD;AACD;AAED;;;;;;;yCAIqB,K,EAAO;AAC1B,UAAM,OAAO,GAAG,IAAI,kBAAJ,EAAhB,CAD0B,CAE1B;;AACA,MAAA,OAAO,CAAC,aAAR;AACD;;;6CAEwB,K,EAAO;AAC9B,UAAI,sBAAJ,CAAyB,QAAQ,CAAC,aAAT,CAAuB,mBAAvB,CAAzB;AACD;;;wCAEmB,K,EAAO;AACzB,MAAA,SAAS,CAAC,OAAV,CAAkB,CAAC,GAAD,EAAM,CAAN,EAAS,GAAT,EAAc,CAAd,EAAiB,GAAjB,EAAsB,CAAtB,EAAyB,GAAzB,EAA8B,CAA9B,EAAiC,GAAjC,EAAsC,CAAtC,EAAyC,GAAzC,EAA8C,CAA9C,EAAiD,GAAjD,EAAsD,CAAtD,EAAyD,GAAzD,EAA8D,CAA9D,EAAiE,GAAjE,CAAlB;AACD;;;;;;AAGH,IAAM,CAAC,GAAG,IAAI,IAAJ,EAAV","file":"main.bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class BatteryService {\r\n  constructor() {\r\n\r\n  }\r\n\r\n  /**\r\n   * @returns {Promise}\r\n   */\r\n  static batteryLevel() {\r\n    return new Promise((resolve, reject) => {\r\n      navigator.getBattery().then(value => resolve(value.level))\r\n    })\r\n  }\r\n}\r\n","/**\r\n * @fileoverview Implementation of the Bluetooth Web Api\r\n * @see {@link https://googlechrome.github.io/samples/web-bluetooth/device-info.html}\r\n *\r\n * At the time of writing this API is very unstable and useless.\r\n * Devices show up as unsupported missing their names, and it works terrible on mobile.\r\n */\r\n\r\nexport default class BluetoothService {\r\n  constructor() {\r\n\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  getAllDevices() {\r\n    if (!('bluetooth' in navigator)) {\r\n      alert('no bluetooth :(')\r\n      return\r\n    }\r\n\r\n    navigator.bluetooth.requestDevice({\r\n      //filters: [],\r\n      acceptAllDevices: true\r\n    })\r\n      .then(devices => {\r\n        console.log(devices);\r\n      })\r\n      .catch(error => console.error(`${error.name} (${error.code}): ${error.message}`))\r\n  }\r\n}\r\n","export default class ForegroundService {\r\n  constructor() {\r\n    document.addEventListener('visibilitychange', event => {\r\n      console.log(event, document.visibilityState);\r\n    });\r\n  }\r\n\r\n  static get isInForeground() {\r\n    return document.visibilityState === \"visible\"\r\n  }\r\n}\r\n","export default class NotificationService {\r\n  /**\r\n   * Show a local notification\r\n   * @param {string} title\r\n   * @param {NotificationOptions} options\r\n   */\r\n  static showNotification(title, options) {\r\n    const opts = Object.assign({\r\n      icon: './assets/img/icon-192.png',\r\n      badge: './assets/img/icon-128.png',\r\n      body: \"\",\r\n      vibrate: [200, 100, 200, 100, 200, 100, 200],\r\n      tag: 'test-notification'\r\n    }, options);\r\n\r\n    if (Notification.permission !== 'granted') {\r\n      Notification.requestPermission().then(result => {\r\n        navigator.serviceWorker.getRegistration().then(registration => {\r\n          registration.showNotification(title, opts);\r\n        })\r\n      });\r\n    } else {\r\n      navigator.serviceWorker.getRegistration().then(registration => {\r\n        registration.showNotification(title, opts);\r\n      })\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @fileoverview Screencapture / sharing service. Handles sharing your screen.\r\n *\r\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/Screen_Capture_API}\r\n */\r\n\r\nexport default class ScreencaptureService {\r\n  /**\r\n   *\r\n   * @param {HTMLVideoElement} videoEl\r\n   */\r\n  constructor(videoEl, options) {\r\n    this.videoEl = videoEl;\r\n    this.options = Object.assign({\r\n      video: {\r\n        cursor: \"always\",\r\n        displaySurface: \"monitor\"\r\n      },\r\n      audio: false\r\n    }, options);\r\n\r\n    navigator.mediaDevices.getDisplayMedia(this.options)\r\n      .then(stream => {\r\n        this.videoEl.srcObject = stream;\r\n        this.videoEl.style.display = \"block\";\r\n\r\n        stream.oninactive = this.handleCaptureStop.bind(this);\r\n      })\r\n      .catch(error => console.log(\"\" + error))\r\n  }\r\n\r\n  handleCaptureStop(event) {\r\n    const tracks = this.videoEl.srcObject.getTracks();\r\n\r\n    tracks.forEach(track => track.stop());\r\n    this.videoEl.srcObject = null;\r\n    this.videoEl.style.display = \"none\";\r\n  }\r\n}\r\n","export default class ShareService {\r\n    static get hasShare() {\r\n        return (navigator.share) ? true : false;\r\n    }\r\n\r\n    /**\r\n     * Share\r\n     * @param {ShareModel} shareObj\r\n     */\r\n    static share(shareObj) {\r\n        if (this.hasShare) {\r\n            return navigator.share({\r\n                title: shareObj.title,\r\n                text: shareObj.text,\r\n                url: shareObj.url\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\nexport class ShareModel {\r\n    constructor(title, text, url) {\r\n        this.title = title;\r\n        this.text = text;\r\n        this.url = url;\r\n    }\r\n}\r\n","import NotificationService from \"./../Services/notification.service\"\r\nimport ShareService, { ShareModel } from \"./../Services/share.service\"\r\nimport BluetoothService from \"../Services/bluetooth.service\";\r\nimport ForegroundService from \"../Services/foreground.service\";\r\nimport ScreencaptureService from \"../Services/screencapture.service\";\r\nimport BatteryService from \"../Services/battery.service\";\r\n\r\nconst SERVICEWORKER = './service-worker.js';\r\n\r\nclass Main {\r\n  constructor() {\r\n    window.addEventListener('beforeinstallprompt', this.handleInstall.bind(this));\r\n\r\n    if ('serviceWorker' in navigator) {\r\n      window.addEventListener('load', this.registerServiceWorker.bind(this));\r\n    }\r\n\r\n    this.state = {\r\n      installPrompt: null,\r\n    };\r\n\r\n    document.querySelector(\"#btnShare\").addEventListener('click', this.handleShareClick.bind(this));\r\n    document.querySelector(\"#btnNotify\").addEventListener('click', this.handleNotifyClick.bind(this));\r\n    document.querySelector(\"#btnBluetooth\").addEventListener('click', this.handleBluetoothClick.bind(this));\r\n    document.querySelector(\"#btnScreencapture\").addEventListener('click', this.handleScreencaptureClick.bind(this));\r\n    document.querySelector(\"#btnPleasure\").addEventListener('click', this.handlePleasureClick.bind(this));\r\n\r\n    const fg = new ForegroundService();\r\n\r\n    document.querySelector(\"#txtNetworkInfo\").innerHTML = `Speed: ${navigator.connection.downlink} MB/s<br>Latency: ${navigator.connection.rtt}`;\r\n    BatteryService.batteryLevel().then(level => {\r\n      document.querySelector(\"#txtBattery\").innerHTML = level * 100 + \" %\";\r\n    })\r\n  }\r\n\r\n  handleInstall(e) {\r\n    console.log('beforeinstallprompt Event fired');\r\n\r\n    e.userChoice.then(function (choiceResult) {\r\n      console.log(choiceResult.outcome);\r\n\r\n      if (choiceResult.outcome === 'dismissed') {\r\n        console.log('User cancelled home screen install');\r\n        alert('ahw :(');\r\n      } else {\r\n        console.log('User added to home screen');\r\n        alert('Yay!');\r\n      }\r\n    });\r\n  }\r\n\r\n  registerServiceWorker() {\r\n    navigator.serviceWorker.register(SERVICEWORKER).then(function (registration) {\r\n      console.log(`ServiceWorker registration successful with scope: ${registration.scope}`);\r\n    }, function (err) {\r\n      console.error(`ServiceWorker registration failed: ${err}`);\r\n    });\r\n  }\r\n\r\n  promptInstall(installPrompt) {\r\n    if (installPrompt === undefined) return false;\r\n\r\n    installPrompt.prompt();\r\n\r\n    installPrompt.userChoice.then(function (choiceResult) {\r\n      console.log(choiceResult.outcome);\r\n\r\n      installPrompt = null;\r\n\r\n      return choiceResult.outcome !== 'dismissed';\r\n    });\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Share button click event\r\n   * @param {Event} event\r\n   */\r\n  handleShareClick(event) {\r\n    ShareService.share(new ShareModel('KappaPride!', 'PWA is Kappa', './'))\r\n  }\r\n\r\n  /**\r\n   * Notify button click event\r\n   * @param {Event} event\r\n   */\r\n  handleNotifyClick(event) {\r\n    NotificationService.showNotification(\"Kappa world!\", {body: \"This notification is a test, so do with it as you will.\"});\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param {Event} event\r\n   */\r\n  handleBluetoothClick(event) {\r\n    const service = new BluetoothService();\r\n    // div#listBluetoothDevices\r\n    service.getAllDevices();\r\n  }\r\n\r\n  handleScreencaptureClick(event) {\r\n    new ScreencaptureService(document.querySelector(\"#vidScreencapture\"));\r\n  }\r\n\r\n  handlePleasureClick(event) {\r\n    navigator.vibrate([100, 0, 100, 0, 100, 0, 300, 0, 300, 0, 300, 0, 100, 0, 100, 0, 100]);\r\n  }\r\n}\r\n\r\nconst m = new Main();\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhc3NldHMvanMvU2VydmljZXMvYmF0dGVyeS5zZXJ2aWNlLmpzIiwiYXNzZXRzL2pzL1NlcnZpY2VzL2JsdWV0b290aC5zZXJ2aWNlLmpzIiwiYXNzZXRzL2pzL1NlcnZpY2VzL2ZvcmVncm91bmQuc2VydmljZS5qcyIsImFzc2V0cy9qcy9TZXJ2aWNlcy9ub3RpZmljYXRpb24uc2VydmljZS5qcyIsImFzc2V0cy9qcy9TZXJ2aWNlcy9zY3JlZW5jYXB0dXJlLnNlcnZpY2UuanMiLCJhc3NldHMvanMvU2VydmljZXMvc2hhcmUuc2VydmljZS5qcyIsImFzc2V0cy9qcy9idW5kbGVzL21haW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7O0lDQXFCLGM7OztBQUNuQiw0QkFBYztBQUFBO0FBRWI7QUFFRDs7Ozs7OzttQ0FHc0I7QUFDcEIsYUFBTyxJQUFJLE9BQUosQ0FBWSxVQUFDLE9BQUQsRUFBVSxNQUFWLEVBQXFCO0FBQ3RDLFFBQUEsU0FBUyxDQUFDLFVBQVYsR0FBdUIsSUFBdkIsQ0FBNEIsVUFBQSxLQUFLO0FBQUEsaUJBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFQLENBQVg7QUFBQSxTQUFqQztBQUNELE9BRk0sQ0FBUDtBQUdEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDWkg7Ozs7Ozs7SUFRcUIsZ0I7OztBQUNuQiw4QkFBYztBQUFBO0FBRWI7QUFFRDs7Ozs7OztvQ0FHZ0I7QUFDZCxVQUFJLEVBQUUsZUFBZSxTQUFqQixDQUFKLEVBQWlDO0FBQy9CLFFBQUEsS0FBSyxDQUFDLGlCQUFELENBQUw7QUFDQTtBQUNEOztBQUVELE1BQUEsU0FBUyxDQUFDLFNBQVYsQ0FBb0IsYUFBcEIsQ0FBa0M7QUFDaEM7QUFDQSxRQUFBLGdCQUFnQixFQUFFO0FBRmMsT0FBbEMsRUFJRyxJQUpILENBSVEsVUFBQSxPQUFPLEVBQUk7QUFDZixRQUFB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WSxDQUFDLE9BQXpCO0FBRUEsUUFBQSxhQUFhLEdBQUcsSUFBaEI7QUFFQSxlQUFPLFlBQVksQ0FBQyxPQUFiLEtBQXlCLFdBQWhDO0FBQ0QsT0FORDtBQU9BLGFBQU8sS0FBUDtBQUNEO0FBRUQ7Ozs7Ozs7cUNBSWlCLEssRUFBTztBQUN0QixxQkFBYSxLQUFiLENBQW1CLElBQUksaUJBQUosQ0FBZSxhQUFmLEVBQThCLGNBQTlCLEVBQThDLElBQTlDLENBQW5CO0FBQ0Q7QUFFRDs7Ozs7OztzQ0FJa0IsSyxFQUFPO0FBQ3ZCLDRCQUFvQixnQkFBcEIsQ0FBcUMsY0FBckMsRUFBcUQ7QUFBQyxRQUFBLElBQUksRUFBRTtBQUFQLE9BQXJEO0FBQ0Q7QUFFRDs7Ozs7Ozt5Q0FJcUIsSyxFQUFPO0FBQzFCLFVBQU0sT0FBTyxHQUFHLElBQUksa0JBQUosRUFBaEIsQ0FEMEIsQ0FFMUI7O0FBQ0EsTUFBQSxPQUFPLENBQUMsYUFBUjtBQUNEOzs7NkNBRXdCLEssRUFBTztBQUM5QixVQUFJLHNCQUFKLENBQXlCLFFBQVEsQ0FBQyxhQUFULENBQXVCLG1CQUF2QixDQUF6QjtBQUNEOzs7d0NBRW1CLEssRUFBTztBQUN6QixNQUFBLFNBQVMsQ0FBQyxPQUFWLENBQWtCLENBQUMsR0FBRCxFQUFNLENBQU4sRUFBUyxHQUFULEVBQWMsQ0FBZCxFQUFpQixHQUFqQixFQUFzQixDQUF0QixFQUF5QixHQUF6QixFQUE4QixDQUE5QixFQUFpQyxHQUFqQyxFQUFzQyxDQUF0QyxFQUF5QyxHQUF6QyxFQUE4QyxDQUE5QyxFQUFpRCxHQUFqRCxFQUFzRCxDQUF0RCxFQUF5RCxHQUF6RCxFQUE4RCxDQUE5RCxFQUFpRSxHQUFqRSxDQUFsQjtBQUNEOzs7Ozs7QUFHSCxJQUFNLENBQUMsR0FBRyxJQUFJLElBQUosRUFBViIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEJhdHRlcnlTZXJ2aWNlIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZX1cclxuICAgKi9cclxuICBzdGF0aWMgYmF0dGVyeUxldmVsKCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgbmF2aWdhdG9yLmdldEJhdHRlcnkoKS50aGVuKHZhbHVlID0+IHJlc29sdmUodmFsdWUubGV2ZWwpKVxyXG4gICAgfSlcclxuICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgSW1wbGVtZW50YXRpb24gb2YgdGhlIEJsdWV0b290aCBXZWIgQXBpXHJcbiAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZ29vZ2xlY2hyb21lLmdpdGh1Yi5pby9zYW1wbGVzL3dlYi1ibHVldG9vdGgvZGV2aWNlLWluZm8uaHRtbH1cclxuICpcclxuICogQXQgdGhlIHRpbWUgb2Ygd3JpdGluZyB0aGlzIEFQSSBpcyB2ZXJ5IHVuc3RhYmxlIGFuZCB1c2VsZXNzLlxyXG4gKiBEZXZpY2VzIHNob3cgdXAgYXMgdW5zdXBwb3J0ZWQgbWlzc2luZyB0aGVpciBuYW1lcywgYW5kIGl0IHdvcmtzIHRlcnJpYmxlIG9uIG1vYmlsZS5cclxuICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbHVldG9vdGhTZXJ2aWNlIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKlxyXG4gICAqL1xyXG4gIGdldEFsbERldmljZXMoKSB7XHJcbiAgICBpZiAoISgnYmx1ZXRvb3RoJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgIGFsZXJ0KCdubyBibHVldG9vdGggOignKVxyXG4gICAgICByZXR1cm5cclxuICAgIH1cclxuXHJcbiAgICBuYXZpZ2F0b3IuYmx1ZXRvb3RoLnJlcXVlc3REZXZpY2Uoe1xyXG4gICAgICAvL2ZpbHRlcnM6IFtdLFxyXG4gICAgICBhY2NlcHRBbGxEZXZpY2VzOiB0cnVlXHJcbiAgICB9KVxyXG4gICAgICAudGhlbihkZXZpY2VzID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhkZXZpY2VzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoYCR7ZXJyb3IubmFtZX0gKCR7ZXJyb3IuY29kZX0pOiAke2Vycm9yLm1lc3NhZ2V9YCkpXHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcmVncm91bmRTZXJ2aWNlIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBldmVudCA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGV2ZW50LCBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzdGF0aWMgZ2V0IGlzSW5Gb3JlZ3JvdW5kKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gXCJ2aXNpYmxlXCJcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm90aWZpY2F0aW9uU2VydmljZSB7XHJcbiAgLyoqXHJcbiAgICogU2hvdyBhIGxvY2FsIG5vdGlmaWNhdGlvblxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0aXRsZVxyXG4gICAqIEBwYXJhbSB7Tm90aWZpY2F0aW9uT3B0aW9uc30gb3B0aW9uc1xyXG4gICAqL1xyXG4gIHN0YXRpYyBzaG93Tm90aWZpY2F0aW9uKHRpdGxlLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBvcHRzID0gT2JqZWN0LmFzc2lnbih7XHJcbiAgICAgIGljb246ICcuL2Fzc2V0cy9pbWcvaWNvbi0xOTIucG5nJyxcclxuICAgICAgYmFkZ2U6ICcuL2Fzc2V0cy9pbWcvaWNvbi0xMjgucG5nJyxcclxuICAgICAgYm9keTogXCJcIixcclxuICAgICAgdmlicmF0ZTogWzIwMCwgMTAwLCAyMDAsIDEwMCwgMjAwLCAxMDAsIDIwMF0sXHJcbiAgICAgIHRhZzogJ3Rlc3Qtbm90aWZpY2F0aW9uJ1xyXG4gICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHtcclxuICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbigpLnRoZW4ocmVnaXN0cmF0aW9uID0+IHtcclxuICAgICAgICAgIHJlZ2lzdHJhdGlvbi5zaG93Tm90aWZpY2F0aW9uKHRpdGxlLCBvcHRzKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbigpLnRoZW4ocmVnaXN0cmF0aW9uID0+IHtcclxuICAgICAgICByZWdpc3RyYXRpb24uc2hvd05vdGlmaWNhdGlvbih0aXRsZSwgb3B0cyk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsIi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNjcmVlbmNhcHR1cmUgLyBzaGFyaW5nIHNlcnZpY2UuIEhhbmRsZXMgc2hhcmluZyB5b3VyIHNjcmVlbi5cclxuICpcclxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NjcmVlbl9DYXB0dXJlX0FQSX1cclxuICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTY3JlZW5jYXB0dXJlU2VydmljZSB7XHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0hUTUxWaWRlb0VsZW1lbnR9IHZpZGVvRWxcclxuICAgKi9cclxuICBjb25zdHJ1Y3Rvcih2aWRlb0VsLCBvcHRpb25zKSB7XHJcbiAgICB0aGlzLnZpZGVvRWwgPSB2aWRlb0VsO1xyXG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XHJcbiAgICAgIHZpZGVvOiB7XHJcbiAgICAgICAgY3Vyc29yOiBcImFsd2F5c1wiLFxyXG4gICAgICAgIGRpc3BsYXlTdXJmYWNlOiBcIm1vbml0b3JcIlxyXG4gICAgICB9LFxyXG4gICAgICBhdWRpbzogZmFsc2VcclxuICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgIG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKHRoaXMub3B0aW9ucylcclxuICAgICAgLnRoZW4oc3RyZWFtID0+IHtcclxuICAgICAgICB0aGlzLnZpZGVvRWwuc3JjT2JqZWN0ID0gc3RyZWFtO1xyXG4gICAgICAgIHRoaXMudmlkZW9FbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgICBzdHJlYW0ub25pbmFjdGl2ZSA9IHRoaXMuaGFuZGxlQ2FwdHVyZVN0b3AuYmluZCh0aGlzKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKFwiXCIgKyBlcnJvcikpXHJcbiAgfVxyXG5cclxuICBoYW5kbGVDYXB0dXJlU3RvcChldmVudCkge1xyXG4gICAgY29uc3QgdHJhY2tzID0gdGhpcy52aWRlb0VsLnNyY09iamVjdC5nZXRUcmFja3MoKTtcclxuXHJcbiAgICB0cmFja3MuZm9yRWFjaCh0cmFjayA9PiB0cmFjay5zdG9wKCkpO1xyXG4gICAgdGhpcy52aWRlb0VsLnNyY09iamVjdCA9IG51bGw7XHJcbiAgICB0aGlzLnZpZGVvRWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTaGFyZVNlcnZpY2Uge1xyXG4gICAgc3RhdGljIGdldCBoYXNTaGFyZSgpIHtcclxuICAgICAgICByZXR1cm4gKG5hdmlnYXRvci5zaGFyZSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaGFyZVxyXG4gICAgICogQHBhcmFtIHtTaGFyZU1vZGVsfSBzaGFyZU9ialxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc2hhcmUoc2hhcmVPYmopIHtcclxuICAgICAgICBpZiAodGhpcy5oYXNTaGFyZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmF2aWdhdG9yLnNoYXJlKHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBzaGFyZU9iai50aXRsZSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHNoYXJlT2JqLnRleHQsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHNoYXJlT2JqLnVybFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaGFyZU1vZGVsIHtcclxuICAgIGNvbnN0cnVjdG9yKHRpdGxlLCB0ZXh0LCB1cmwpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgTm90aWZpY2F0aW9uU2VydmljZSBmcm9tIFwiLi8uLi9TZXJ2aWNlcy9ub3RpZmljYXRpb24uc2VydmljZVwiXHJcbmltcG9ydCBTaGFyZVNlcnZpY2UsIHsgU2hhcmVNb2RlbCB9IGZyb20gXCIuLy4uL1NlcnZpY2VzL3NoYXJlLnNlcnZpY2VcIlxyXG5pbXBvcnQgQmx1ZXRvb3RoU2VydmljZSBmcm9tIFwiLi4vU2VydmljZXMvYmx1ZXRvb3RoLnNlcnZpY2VcIjtcclxuaW1wb3J0IEZvcmVncm91bmRTZXJ2aWNlIGZyb20gXCIuLi9TZXJ2aWNlcy9mb3JlZ3JvdW5kLnNlcnZpY2VcIjtcclxuaW1wb3J0IFNjcmVlbmNhcHR1cmVTZXJ2aWNlIGZyb20gXCIuLi9TZXJ2aWNlcy9zY3JlZW5jYXB0dXJlLnNlcnZpY2VcIjtcclxuaW1wb3J0IEJhdHRlcnlTZXJ2aWNlIGZyb20gXCIuLi9TZXJ2aWNlcy9iYXR0ZXJ5LnNlcnZpY2VcIjtcclxuXHJcbmNvbnN0IFNFUlZJQ0VXT1JLRVIgPSAnLi9zZXJ2aWNlLXdvcmtlci5qcyc7XHJcblxyXG5jbGFzcyBNYWluIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmVpbnN0YWxscHJvbXB0JywgdGhpcy5oYW5kbGVJbnN0YWxsLmJpbmQodGhpcykpO1xyXG5cclxuICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgdGhpcy5yZWdpc3RlclNlcnZpY2VXb3JrZXIuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgaW5zdGFsbFByb21wdDogbnVsbCxcclxuICAgIH07XHJcblxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNidG5TaGFyZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlU2hhcmVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuTm90aWZ5XCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVOb3RpZnlDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuQmx1ZXRvb3RoXCIpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVCbHVldG9vdGhDbGljay5iaW5kKHRoaXMpKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYnRuU2NyZWVuY2FwdHVyZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlU2NyZWVuY2FwdHVyZUNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNidG5QbGVhc3VyZVwiKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlUGxlYXN1cmVDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICBjb25zdCBmZyA9IG5ldyBGb3JlZ3JvdW5kU2VydmljZSgpO1xyXG5cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdHh0TmV0d29ya0luZm9cIikuaW5uZXJIVE1MID0gYFNwZWVkOiAke25hdmlnYXRvci5jb25uZWN0aW9uLmRvd25saW5rfSBNQi9zPGJyPkxhdGVuY3k6ICR7bmF2aWdhdG9yLmNvbm5lY3Rpb24ucnR0fWA7XHJcbiAgICBCYXR0ZXJ5U2VydmljZS5iYXR0ZXJ5TGV2ZWwoKS50aGVuKGxldmVsID0+IHtcclxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0eHRCYXR0ZXJ5XCIpLmlubmVySFRNTCA9IGxldmVsICogMTAwICsgXCIgJVwiO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGhhbmRsZUluc3RhbGwoZSkge1xyXG4gICAgY29uc29sZS5sb2coJ2JlZm9yZWluc3RhbGxwcm9tcHQgRXZlbnQgZmlyZWQnKTtcclxuXHJcbiAgICBlLnVzZXJDaG9pY2UudGhlbihmdW5jdGlvbiAoY2hvaWNlUmVzdWx0KSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGNob2ljZVJlc3VsdC5vdXRjb21lKTtcclxuXHJcbiAgICAgIGlmIChjaG9pY2VSZXN1bHQub3V0Y29tZSA9PT0gJ2Rpc21pc3NlZCcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBjYW5jZWxsZWQgaG9tZSBzY3JlZW4gaW5zdGFsbCcpO1xyXG4gICAgICAgIGFsZXJ0KCdhaHcgOignKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVXNlciBhZGRlZCB0byBob21lIHNjcmVlbicpO1xyXG4gICAgICAgIGFsZXJ0KCdZYXkhJyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCkge1xyXG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoU0VSVklDRVdPUktFUikudGhlbihmdW5jdGlvbiAocmVnaXN0cmF0aW9uKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGBTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsIHdpdGggc2NvcGU6ICR7cmVnaXN0cmF0aW9uLnNjb3BlfWApO1xyXG4gICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBTZXJ2aWNlV29ya2VyIHJlZ2lzdHJhdGlvbiBmYWlsZWQ6ICR7ZXJyfWApO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcm9tcHRJbnN0YWxsKGluc3RhbGxQcm9tcHQpIHtcclxuICAgIGlmIChpbnN0YWxsUHJvbXB0ID09PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICBpbnN0YWxsUHJvbXB0LnByb21wdCgpO1xyXG5cclxuICAgIGluc3RhbGxQcm9tcHQudXNlckNob2ljZS50aGVuKGZ1bmN0aW9uIChjaG9pY2VSZXN1bHQpIHtcclxuICAgICAgY29uc29sZS5sb2coY2hvaWNlUmVzdWx0Lm91dGNvbWUpO1xyXG5cclxuICAgICAgaW5zdGFsbFByb21wdCA9IG51bGw7XHJcblxyXG4gICAgICByZXR1cm4gY2hvaWNlUmVzdWx0Lm91dGNvbWUgIT09ICdkaXNtaXNzZWQnO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTaGFyZSBidXR0b24gY2xpY2sgZXZlbnRcclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxyXG4gICAqL1xyXG4gIGhhbmRsZVNoYXJlQ2xpY2soZXZlbnQpIHtcclxuICAgIFNoYXJlU2VydmljZS5zaGFyZShuZXcgU2hhcmVNb2RlbCgnS2FwcGFQcmlkZSEnLCAnUFdBIGlzIEthcHBhJywgJy4vJykpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBOb3RpZnkgYnV0dG9uIGNsaWNrIGV2ZW50XHJcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcclxuICAgKi9cclxuICBoYW5kbGVOb3RpZnlDbGljayhldmVudCkge1xyXG4gICAgTm90aWZpY2F0aW9uU2VydmljZS5zaG93Tm90aWZpY2F0aW9uKFwiS2FwcGEgd29ybGQhXCIsIHtib2R5OiBcIlRoaXMgbm90aWZpY2F0aW9uIGlzIGEgdGVzdCwgc28gZG8gd2l0aCBpdCBhcyB5b3Ugd2lsbC5cIn0pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxyXG4gICAqL1xyXG4gIGhhbmRsZUJsdWV0b290aENsaWNrKGV2ZW50KSB7XHJcbiAgICBjb25zdCBzZXJ2aWNlID0gbmV3IEJsdWV0b290aFNlcnZpY2UoKTtcclxuICAgIC8vIGRpdiNsaXN0Qmx1ZXRvb3RoRGV2aWNlc1xyXG4gICAgc2VydmljZS5nZXRBbGxEZXZpY2VzKCk7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVTY3JlZW5jYXB0dXJlQ2xpY2soZXZlbnQpIHtcclxuICAgIG5ldyBTY3JlZW5jYXB0dXJlU2VydmljZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ZpZFNjcmVlbmNhcHR1cmVcIikpO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlUGxlYXN1cmVDbGljayhldmVudCkge1xyXG4gICAgbmF2aWdhdG9yLnZpYnJhdGUoWzEwMCwgMCwgMTAwLCAwLCAxMDAsIDAsIDMwMCwgMCwgMzAwLCAwLCAzMDAsIDAsIDEwMCwgMCwgMTAwLCAwLCAxMDBdKTtcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IG0gPSBuZXcgTWFpbigpO1xyXG4iXX0="}